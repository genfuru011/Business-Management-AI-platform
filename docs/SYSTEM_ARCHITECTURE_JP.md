# ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹é€ å›³

## ğŸ“‹ ç›®æ¬¡
1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹é€ ](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹é€ )
3. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
4. [AIçµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#AIçµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
5. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ )
6. [APIè¨­è¨ˆ](#APIè¨­è¨ˆ)
7. [ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹é€ ](#ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹é€ )
8. [æœ€è¿‘ã®æ”¹å–„ç‚¹](#æœ€è¿‘ã®æ”¹å–„ç‚¹)

---

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

**AIçµ±åˆãƒ“ã‚¸ãƒã‚¹ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **ã¯ã€ä»¥ä¸‹ã®ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æ§‹æˆã•ã‚Œã‚‹åŒ…æ‹¬çš„ãªãƒ“ã‚¸ãƒã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ãƒ“ã‚¸ãƒã‚¹ç®¡ç†AIãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Next.js + React)                          â”‚
â”‚  ğŸ¤– AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå±¤ (MCPçµ±åˆ)                               â”‚
â”‚  ğŸ”— APIå±¤ (RESTful + æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯)                          â”‚
â”‚  ğŸ—„ï¸  ãƒ‡ãƒ¼ã‚¿å±¤ (MongoDB + JSON Fallback)                    â”‚
â”‚  ğŸ“Š åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆå±¤                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹é€ 

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```mermaid
graph TB
    subgraph "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤"
        A[Dashboard ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
        B[Customer Management é¡§å®¢ç®¡ç†]
        C[Product Management å•†å“ç®¡ç†]
        D[Invoice Management è«‹æ±‚æ›¸ç®¡ç†]
        E[Finance Management è²¡å‹™ç®¡ç†]
        F[Reports ãƒ¬ãƒãƒ¼ãƒˆ]
    end
    
    subgraph "AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå±¤"
        G[Enhanced AI Agent]
        H[MCP Protocol]
        I[Business Insights]
    end
    
    subgraph "APIå±¤"
        J[Business Agent API]
        K[CRUD APIs]
        L[Analytics API]
        M[Report Generation API]
    end
    
    subgraph "ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤"
        N[Performance Monitor]
        O[Report Exporter]
        P[AI Learning System]
    end
    
    subgraph "ãƒ‡ãƒ¼ã‚¿å±¤"
        Q[(MongoDB Database)]
        R[JSON Fallback Files]
    end
    
    A --> J
    B --> K
    C --> K
    D --> K
    E --> K
    F --> M
    
    J --> G
    G --> H
    H --> Q
    H --> R
    
    K --> Q
    K --> R
    L --> N
    M --> O
    G --> P
```

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢ä¿‚å›³

```
ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”œâ”€â”€ ğŸ  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ ğŸ“Š çµ±è¨ˆã‚µãƒãƒªãƒ¼
â”‚   â”œâ”€â”€ ğŸ¤– AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ£ãƒƒãƒˆ
â”‚   â”œâ”€â”€ ğŸ“ˆ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
â”‚   â””â”€â”€ ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
â”œâ”€â”€ ğŸ‘¥ é¡§å®¢ç®¡ç†
â”œâ”€â”€ ğŸ“¦ å•†å“ãƒ»åœ¨åº«ç®¡ç†
â”œâ”€â”€ ğŸ“„ è«‹æ±‚æ›¸ç®¡ç†
â”œâ”€â”€ ğŸ’° è²¡å‹™ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ’µ å£²ä¸Šè¨˜éŒ² (ç‹¬ç«‹)
â”‚   â”œâ”€â”€ ğŸ’¸ æ”¯å‡ºè¨˜éŒ²
â”‚   â””â”€â”€ ğŸ“Š åæ”¯åˆ†æ
â””â”€â”€ ğŸ“‹ ãƒ¬ãƒãƒ¼ãƒˆãƒ»åˆ†æ

ğŸ¤– AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµ±åˆ
â”œâ”€â”€ ğŸ§  åŸºæœ¬AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ (ai-agent.ts)
â”œâ”€â”€ ğŸš€ æ‹¡å¼µAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ (enhanced-ai-agent.ts)
â”‚   â”œâ”€â”€ ğŸ”— MCPçµ±åˆ
â”‚   â”œâ”€â”€ ğŸ›¡ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
â”‚   â””â”€â”€ ğŸ“Š ãƒ‡ãƒ¼ã‚¿åˆ†ææ©Ÿèƒ½
â”œâ”€â”€ ğŸ“¡ MCPãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š (mcp-database.ts)
â””â”€â”€ ğŸ“ å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ  (ai-learning.ts)

ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ç®¡ç†
â”œâ”€â”€ ğŸ“Š MongoDBãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ ğŸ‘¥ é¡§å®¢ (Customer)
â”‚   â”œâ”€â”€ ğŸ“¦ å•†å“ (Product)
â”‚   â”œâ”€â”€ ğŸ“„ è«‹æ±‚æ›¸ (Invoice)
â”‚   â”œâ”€â”€ ğŸ’° å£²ä¸Š (Sale) - ç‹¬ç«‹åŒ–
â”‚   â””â”€â”€ ğŸ’¸ æ”¯å‡º (Expense)
â””â”€â”€ ğŸ“ JSONãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    â”œâ”€â”€ customers.json
    â”œâ”€â”€ products.json
    â”œâ”€â”€ sales.json
    â””â”€â”€ finances.json
```

---

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. é€šå¸¸ã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ•ãƒ­ãƒ¼
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ â†’ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ API â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ â†’ UIæ›´æ–°
```

### 2. AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ•ãƒ­ãƒ¼
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼è³ªå• â†’ AI Agent â†’ MCP Protocol â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ â†’ AIåˆ†æ â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ
```

### 3. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ•ãƒ­ãƒ¼
```
ãƒ¬ãƒãƒ¼ãƒˆè¦æ±‚ â†’ Business Report API â†’ ãƒ‡ãƒ¼ã‚¿é›†ç´„ â†’ åˆ†æå‡¦ç† â†’ PDF/Excelç”Ÿæˆ
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è©³ç´°å›³

```mermaid
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant F as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
    participant API as APIå±¤
    participant AI as AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    participant MCP as MCP Protocol
    participant DB as ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
    participant JSON as JSONãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

    Note over U,JSON: é€šå¸¸ã®ãƒ‡ãƒ¼ã‚¿æ“ä½œãƒ•ãƒ­ãƒ¼
    U->>F: ãƒ‡ãƒ¼ã‚¿æ“ä½œè¦æ±‚
    F->>API: HTTP Request
    API->>DB: MongoDB Query
    alt MongoDBæ¥ç¶šæˆåŠŸ
        DB-->>API: ãƒ‡ãƒ¼ã‚¿è¿”å´
    else MongoDBæ¥ç¶šå¤±æ•—
        API->>JSON: JSONãƒ•ã‚¡ã‚¤ãƒ«èª­å–
        JSON-->>API: ãƒ‡ãƒ¼ã‚¿è¿”å´
    end
    API-->>F: JSON Response
    F-->>U: UIæ›´æ–°

    Note over U,JSON: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹åˆ†æãƒ•ãƒ­ãƒ¼
    U->>F: ãƒ“ã‚¸ãƒã‚¹è³ªå•
    F->>AI: Enhanced AI Agent
    AI->>MCP: MCP Request
    MCP->>DB: æ§‹é€ åŒ–ã‚¯ã‚¨ãƒª
    DB-->>MCP: ãƒ“ã‚¸ãƒã‚¹ãƒ‡ãƒ¼ã‚¿
    MCP-->>AI: åˆ†æãƒ‡ãƒ¼ã‚¿
    AI->>AI: ã‚¤ãƒ³ã‚µã‚¤ãƒˆç”Ÿæˆ
    AI-->>F: ãƒ“ã‚¸ãƒã‚¹åˆ†æçµæœ
    F-->>U: åˆ†æãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º
```

---

## ğŸ¤– AIçµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆéšå±¤æ§‹é€ 

```
ğŸ§  AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
â”œâ”€â”€ ğŸ¯ Intent Recognition (æ„å›³èªè­˜)
â”‚   â”œâ”€â”€ Customer Analysis é¡§å®¢åˆ†æ
â”‚   â”œâ”€â”€ Sales Analysis å£²ä¸Šåˆ†æ
â”‚   â”œâ”€â”€ Inventory Management åœ¨åº«ç®¡ç†
â”‚   â”œâ”€â”€ Financial Reporting è²¡å‹™ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ General Business Insights ä¸€èˆ¬çš„ãƒ“ã‚¸ãƒã‚¹æ´å¯Ÿ
â”œâ”€â”€ ğŸ”§ Capability Framework (æ©Ÿèƒ½ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯)
â”‚   â”œâ”€â”€ Data Access ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
â”‚   â”œâ”€â”€ Analysis Processing åˆ†æå‡¦ç†
â”‚   â”œâ”€â”€ Report Generation ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”‚   â””â”€â”€ Recommendation Engine æ¨å¥¨ã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ ğŸ“¡ MCP Integration (Model Context Protocol)
â”‚   â”œâ”€â”€ Database Tools ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ„ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ query_customers é¡§å®¢ã‚¯ã‚¨ãƒª
â”‚   â”‚   â”œâ”€â”€ analyze_sales å£²ä¸Šåˆ†æ
â”‚   â”‚   â”œâ”€â”€ query_products å•†å“ã‚¯ã‚¨ãƒª
â”‚   â”‚   â”œâ”€â”€ generate_financial_report è²¡å‹™ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”‚   â””â”€â”€ get_business_overview æ¥­å‹™æ¦‚è¦
â”‚   â””â”€â”€ Fallback Mechanism ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
â”‚       â”œâ”€â”€ JSON Data Analysis JSONãƒ‡ãƒ¼ã‚¿åˆ†æ
â”‚       â””â”€â”€ Error Recovery ã‚¨ãƒ©ãƒ¼å›å¾©
â””â”€â”€ ğŸ“ Learning System (å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ )
    â”œâ”€â”€ User Feedback ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
    â”œâ”€â”€ Performance Monitoring ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
    â””â”€â”€ Continuous Improvement ç¶™ç¶šçš„æ”¹å–„
```

### AIå‡¦ç†ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¯ã‚¨ãƒª] --> B{æ„å›³èªè­˜}
    B --> C[é¡§å®¢åˆ†æ]
    B --> D[å£²ä¸Šåˆ†æ]
    B --> E[åœ¨åº«ç®¡ç†]
    B --> F[è²¡å‹™åˆ†æ]
    B --> G[ä¸€èˆ¬åˆ†æ]
    
    C --> H[MCP Protocol]
    D --> H
    E --> H
    F --> H
    G --> H
    
    H --> I{ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹}
    I -->|æˆåŠŸ| J[MongoDB]
    I -->|å¤±æ•—| K[JSON Fallback]
    
    J --> L[ãƒ‡ãƒ¼ã‚¿åˆ†æ]
    K --> L
    
    L --> M[ã‚¤ãƒ³ã‚µã‚¤ãƒˆç”Ÿæˆ]
    M --> N[ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ]
    N --> O[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸è¿”å´]
    
    O --> P[ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†]
    P --> Q[å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ]
    Q --> B
```

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«é–¢ä¿‚å›³

```mermaid
erDiagram
    Customer ||--o{ Invoice : "has"
    Customer ||--o{ Sale : "purchases"
    Product ||--o{ InvoiceItem : "included_in"
    Invoice ||--o{ InvoiceItem : "contains"
    Invoice ||--o| Sale : "generates"
    
    Customer {
        ObjectId _id
        string name
        string email
        string phone
        object address
        string company
        string notes
        date createdAt
        date updatedAt
    }
    
    Product {
        ObjectId _id
        string name
        string description
        string sku
        number price
        number cost
        number stock
        string category
        string unit
        boolean isActive
        date createdAt
        date updatedAt
    }
    
    Invoice {
        ObjectId _id
        string invoiceNumber
        ObjectId customer
        array items
        number subtotal
        number tax
        number taxRate
        number total
        string status
        date issueDate
        date dueDate
        date paidDate
        string notes
        date createdAt
        date updatedAt
    }
    
    Sale {
        ObjectId _id
        ObjectId customer
        ObjectId invoice "optional"
        string productName "for direct sales"
        string description
        number quantity
        number unitPrice
        number amount
        string paymentMethod
        date saleDate
        string saleType "invoice_based | direct_sale"
        string notes
        date createdAt
    }
    
    Expense {
        ObjectId _id
        string description
        number amount
        string category
        date expenseDate
        string paymentMethod
        string receipt
        string notes
        date createdAt
    }
```

### ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³

```
ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹éšå±¤
â”œâ”€â”€ ğŸ”„ Primary Access (MongoDB)
â”‚   â”œâ”€â”€ CRUD Operations
â”‚   â”œâ”€â”€ Advanced Queries
â”‚   â”œâ”€â”€ Aggregation Pipeline
â”‚   â””â”€â”€ Real-time Updates
â”œâ”€â”€ ğŸ›¡ï¸ Fallback Access (JSON Files)
â”‚   â”œâ”€â”€ Read-only Operations
â”‚   â”œâ”€â”€ Static Demo Data
â”‚   â”œâ”€â”€ Error Recovery
â”‚   â””â”€â”€ Development Mode
â””â”€â”€ ğŸ”— MCP Standardized Access
    â”œâ”€â”€ Tool-based Queries
    â”œâ”€â”€ Structured Responses
    â”œâ”€â”€ Error Handling
    â””â”€â”€ AI-friendly Format
```

---

## ğŸ”Œ APIè¨­è¨ˆ

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ§‹é€ 

```
ğŸŒ API ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
â”œâ”€â”€ ğŸ¤– /api/business-agent
â”‚   â”œâ”€â”€ POST /chat - AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®ä¼šè©±
â”‚   â””â”€â”€ GET /capabilities - åˆ©ç”¨å¯èƒ½æ©Ÿèƒ½ä¸€è¦§
â”œâ”€â”€ ğŸ‘¥ /api/customers
â”‚   â”œâ”€â”€ GET / - é¡§å®¢ä¸€è¦§å–å¾—
â”‚   â”œâ”€â”€ POST / - é¡§å®¢ä½œæˆ
â”‚   â”œâ”€â”€ GET /[id] - é¡§å®¢è©³ç´°å–å¾—
â”‚   â”œâ”€â”€ PUT /[id] - é¡§å®¢æ›´æ–°
â”‚   â””â”€â”€ DELETE /[id] - é¡§å®¢å‰Šé™¤
â”œâ”€â”€ ğŸ“¦ /api/products
â”‚   â”œâ”€â”€ GET / - å•†å“ä¸€è¦§å–å¾—
â”‚   â”œâ”€â”€ POST / - å•†å“ä½œæˆ
â”‚   â”œâ”€â”€ GET /[id] - å•†å“è©³ç´°å–å¾—
â”‚   â”œâ”€â”€ PUT /[id] - å•†å“æ›´æ–°
â”‚   â””â”€â”€ DELETE /[id] - å•†å“å‰Šé™¤
â”œâ”€â”€ ğŸ“„ /api/invoices
â”‚   â”œâ”€â”€ GET / - è«‹æ±‚æ›¸ä¸€è¦§å–å¾—
â”‚   â”œâ”€â”€ POST / - è«‹æ±‚æ›¸ä½œæˆ
â”‚   â”œâ”€â”€ GET /[id] - è«‹æ±‚æ›¸è©³ç´°å–å¾—
â”‚   â”œâ”€â”€ PUT /[id] - è«‹æ±‚æ›¸æ›´æ–°
â”‚   â””â”€â”€ DELETE /[id] - è«‹æ±‚æ›¸å‰Šé™¤
â”œâ”€â”€ ğŸ’° /api/sales
â”‚   â”œâ”€â”€ GET / - å£²ä¸Šä¸€è¦§å–å¾—
â”‚   â”œâ”€â”€ POST / - å£²ä¸Šè¨˜éŒ²ä½œæˆ (è«‹æ±‚æ›¸ãªã—ã§ã‚‚å¯èƒ½)
â”‚   â”œâ”€â”€ GET /[id] - å£²ä¸Šè©³ç´°å–å¾—
â”‚   â””â”€â”€ DELETE /[id] - å£²ä¸Šå‰Šé™¤
â”œâ”€â”€ ğŸ’¸ /api/expenses
â”‚   â”œâ”€â”€ GET / - æ”¯å‡ºä¸€è¦§å–å¾—
â”‚   â”œâ”€â”€ POST / - æ”¯å‡ºè¨˜éŒ²ä½œæˆ
â”‚   â”œâ”€â”€ GET /[id] - æ”¯å‡ºè©³ç´°å–å¾—
â”‚   â”œâ”€â”€ PUT /[id] - æ”¯å‡ºæ›´æ–°
â”‚   â””â”€â”€ DELETE /[id] - æ”¯å‡ºå‰Šé™¤
â”œâ”€â”€ ğŸ“Š /api/analytics
â”‚   â”œâ”€â”€ GET /dashboard - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±è¨ˆ
â”‚   â”œâ”€â”€ GET /sales-trends - å£²ä¸Šãƒˆãƒ¬ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ GET /customer-analysis - é¡§å®¢åˆ†æ
â”‚   â””â”€â”€ GET /financial-summary - è²¡å‹™ã‚µãƒãƒªãƒ¼
â””â”€â”€ ğŸ“‹ /api/business-report
    â”œâ”€â”€ POST /generate - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    â”œâ”€â”€ GET /export/[format] - ãƒ¬ãƒãƒ¼ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
    â””â”€â”€ GET /templates - ãƒ¬ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```

### APIãƒ¬ã‚¹ãƒãƒ³ã‚¹æ¨™æº–åŒ–

```typescript
// æ¨™æº–APIãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
interface APIResponse<T> {
  success: boolean
  data?: T
  error?: {
    message: string
    code: string
    timestamp: string
  }
  metadata?: {
    page?: number
    limit?: number
    total?: number
  }
}
```

---

## ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹é€ 

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤

```
ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
â”œâ”€â”€ ğŸ“± Pages (app/ directory)
â”‚   â”œâ”€â”€ ğŸ  / â†’ /dashboard (è‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ)
â”‚   â”œâ”€â”€ ğŸ“Š /dashboard - ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ ğŸ‘¥ /customers - é¡§å®¢ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“¦ /products - å•†å“ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“„ /invoices - è«‹æ±‚æ›¸ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ’° /finances - è²¡å‹™ç®¡ç†
â”‚   â””â”€â”€ ğŸ“‹ /reports - ãƒ¬ãƒãƒ¼ãƒˆãƒ»åˆ†æ
â”œâ”€â”€ ğŸ§© Components (components/ directory)
â”‚   â”œâ”€â”€ ğŸ¤– BusinessAIAgent.tsx - AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ£ãƒƒãƒˆ
â”‚   â”œâ”€â”€ ğŸš€ AIQuickActions.tsx - ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ ğŸ“Š RealTimeBusinessMonitor.tsx - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
â”‚   â”œâ”€â”€ ğŸ“ˆ PerformanceMonitorDashboard.tsx - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
â”‚   â”œâ”€â”€ ğŸ“‹ BusinessReportViewer.tsx - ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º
â”‚   â”œâ”€â”€ ğŸ“¤ ReportExportModal.tsx - ãƒ¬ãƒãƒ¼ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ ğŸ§­ Navigation.tsx - ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ ğŸ¨ ui/ - åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â””â”€â”€ ğŸ“š Library (lib/ directory)
    â”œâ”€â”€ ğŸ¤– ai-agent.ts - åŸºæœ¬AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    â”œâ”€â”€ ğŸš€ enhanced-ai-agent.ts - æ‹¡å¼µAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    â”œâ”€â”€ ğŸ“¡ mcp-database.ts - MCPãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
    â”œâ”€â”€ ğŸ“ ai-learning.ts - AIå­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ 
    â”œâ”€â”€ ğŸ“Š business-report.ts - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    â”œâ”€â”€ ğŸ“ˆ performance-monitor.ts - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
    â”œâ”€â”€ ğŸ“¤ report-exporter.ts - ãƒ¬ãƒãƒ¼ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
    â”œâ”€â”€ ğŸ—„ï¸ database.ts - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
    â”œâ”€â”€ ğŸ“‹ models.ts - ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
    â””â”€â”€ ğŸ› ï¸ utils.ts - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```

### çŠ¶æ…‹ç®¡ç†ã¨ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
graph LR
    A[User Interaction] --> B[React Component]
    B --> C[API Call]
    C --> D[Backend Processing]
    D --> E[Database Query]
    E --> F[Response]
    F --> G[State Update]
    G --> H[UI Re-render]
    
    subgraph "AI Flow"
        I[AI Query] --> J[Enhanced AI Agent]
        J --> K[MCP Protocol]
        K --> L[Data Analysis]
        L --> M[AI Response]
    end
    
    B --> I
    M --> G
```

---

## ğŸ”§ æœ€è¿‘ã®æ”¹å–„ç‚¹

### 1. AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆMCPçµ±åˆ (2024å¹´12æœˆ)

**å•é¡Œ**: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæ­£ã—ã„æƒ…å ±ã‚’å‡ºåŠ›ã§ãã¦ã„ãªã„
**è§£æ±º**: Enhanced AI Agentã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

```typescript
// Before: åŸºæœ¬çš„ãªAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
import { processBusinessQuery } from '@/lib/ai-agent'

// After: MCPçµ±åˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
import { processEnhancedBusinessQuery } from '@/lib/enhanced-ai-agent'
```

**æ”¹å–„å†…å®¹**:
- âœ… MCP (Model Context Protocol) çµ±åˆ
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹æ©Ÿèƒ½å¼·åŒ–
- âœ… ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½è¿½åŠ 
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ†é›¢ (2024å¹´12æœˆ)

**è¦æ±‚**: è«‹æ±‚æ›¸ã¨å£²ä¸Šã®DBåˆ†é›¢ã€å£²ä¸Šã‚’ç‹¬ç«‹ã—ã¦è¿½åŠ å¯èƒ½ã«

**å¤‰æ›´å†…å®¹**:
```typescript
// Sale ãƒ¢ãƒ‡ãƒ«ã®æ”¹å–„
const SaleSchema = new mongoose.Schema({
  invoice: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Invoice',
    required: false  // è«‹æ±‚æ›¸ã¨å£²ä¸Šã‚’åˆ†é›¢ - invoiceã¯ä»»æ„ã«
  },
  // å£²ä¸Šã‚¿ã‚¤ãƒ—ã®è¿½åŠ 
  saleType: {
    type: String,
    enum: ['invoice_based', 'direct_sale'],
    default: 'direct_sale'
  },
  // è«‹æ±‚æ›¸ãªã—ã§ã®å£²ä¸Šæƒ…å ±
  productName: String,
  quantity: Number,
  unitPrice: Number,
  // ... ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
})
```

**å®Ÿè£…ã•ã‚ŒãŸæ©Ÿèƒ½**:
- âœ… è«‹æ±‚æ›¸ãªã—ã§ã®å£²ä¸Šè¨˜éŒ²
- âœ… ç›´æ¥å£²ä¸Šä½œæˆæ©Ÿèƒ½
- âœ… å£²ä¸Šã‚¿ã‚¤ãƒ—åˆ†é¡ (invoice_based / direct_sale)
- âœ… è²¡å‹™ç®¡ç†ãƒšãƒ¼ã‚¸ã§ã®å£²ä¸Šè¿½åŠ UI

### 3. ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£…

**è¿½åŠ ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆæ©Ÿèƒ½**:
- âœ… MCPçµ±åˆãƒ†ã‚¹ãƒˆ
- âœ… AIæ¥ç¶šãƒ†ã‚¹ãƒˆ
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆ
- âœ… å£²ä¸Šãƒ»è«‹æ±‚æ›¸åˆ†é›¢ãƒ†ã‚¹ãƒˆ

---

## ğŸ“ˆ ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### ç›£è¦–é …ç›®

```
ğŸ” ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
â”œâ”€â”€ âš¡ ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ CPUä½¿ç”¨ç‡
â”‚   â”œâ”€â”€ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
â”‚   â”œâ”€â”€ ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡
â”‚   â””â”€â”€ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¸¯åŸŸ
â”œâ”€â”€ ğŸŒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ APIå¿œç­”æ™‚é–“
â”‚   â”œâ”€â”€ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæ™‚é–“
â”‚   â”œâ”€â”€ AIå‡¦ç†æ™‚é–“
â”‚   â””â”€â”€ ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚é–“
â”œâ”€â”€ ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹
â”‚   â”œâ”€â”€ ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼æ•°
â”‚   â”œâ”€â”€ ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“
â”‚   â”œâ”€â”€ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡
â”‚   â””â”€â”€ AIæ´»ç”¨ç‡
â””â”€â”€ ğŸ¤– AIæ©Ÿèƒ½
    â”œâ”€â”€ è³ªå•å‡¦ç†æ•°
    â”œâ”€â”€ å›ç­”ç²¾åº¦
    â”œâ”€â”€ å­¦ç¿’ãƒ‡ãƒ¼ã‚¿è“„ç©
    â””â”€â”€ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç‡
```

---

## ğŸš€ ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

### è¨ˆç”»ä¸­ã®æ©Ÿèƒ½

1. **ğŸ“± ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œå¼·åŒ–**
   - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æœ€é©åŒ–
   - PWAå¯¾å¿œ

2. **ğŸ”— å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº**
   - ä¼šè¨ˆã‚½ãƒ•ãƒˆé€£æº
   - æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
   - ECãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é€£æº

3. **ğŸ§  AIæ©Ÿèƒ½æ‹¡å¼µ**
   - äºˆæ¸¬åˆ†ææ©Ÿèƒ½
   - è‡ªå‹•åŒ–æ¨å¥¨
   - ç•°å¸¸æ¤œçŸ¥

4. **ğŸ“Š åˆ†ææ©Ÿèƒ½å¼·åŒ–**
   - é«˜åº¦ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
   - ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ãƒãƒ¼ãƒˆ
   - ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆãƒ»ãŠå•ã„åˆã‚ã›

ã‚·ã‚¹ãƒ†ãƒ ã«ã¤ã„ã¦ã”è³ªå•ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ä»¥ä¸‹ã®æ–¹æ³•ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ï¼š

- ğŸ“§ **æŠ€è¡“ã‚µãƒãƒ¼ãƒˆ**: GitHub Issues
- ğŸ“š **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: `/docs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- ğŸ”§ **é–‹ç™ºè€…å‘ã‘**: `README.md`

---

**æœ€çµ‚æ›´æ–°**: 2024å¹´12æœˆ8æ—¥  
**æ–‡æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: AIçµ±åˆãƒ“ã‚¸ãƒã‚¹ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  v1.0.0